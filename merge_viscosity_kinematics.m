function merge_viscosity_kinematics

filenames = {...
    'rawdata/2013-06-12/lamprey5-1-corr.mat'; ...
    'rawdata/2013-06-12/lamprey5-1a.mat'; ...
    'rawdata/2013-06-12/lamprey5-2-corr.mat'; ...
    'rawdata/2013-06-12/lamprey5-3-corr.mat'; ...
    'rawdata/2013-06-12/lamprey5-4-corr.mat'; ...
    'rawdata/2013-06-12/lamprey5-5-corr.mat'; ...
    'rawdata/2013-06-12/lamprey5-5.mat'; ...
    'rawdata/2013-06-12/lamprey5-6-corr.mat'; ...
    'rawdata/2013-06-12/lamprey5-7.mat'; ...
    'rawdata/2013-06-12/lamprey5-8-corr.mat'; ...
    'rawdata/2013-06-12/lamprey5-9-corr.mat'; ...
    'rawdata/2013-06-12/lamprey5-10-corr.mat'; ...
    'rawdata/2013-06-12/lamprey5-11-corr.mat'; ...
    'rawdata/2013-06-12/lamprey5-12-corr.mat'; ...
    'rawdata/2013-06-12/lamprey5-13-corr.mat'; ...
    'rawdata/2013-06-12/lamprey5-14-corr.mat'; ...
    'rawdata/2013-06-12/lamprey5-15-corr.mat'; ...
    'rawdata/2013-06-12/lamprey5-16-corr.mat'; ...
    'rawdata/2013-06-12/lamprey5-17-corr.mat'; ...
    'rawdata/2013-06-12/lamprey5-18-corr.mat'; ...
    'rawdata/2013-06-12/lamprey5-19-corr.mat'; ...
    'rawdata/2013-06-12/lamprey5-20-corr.mat'; ...
    'rawdata/2013-06-12/lamprey5-21-corr.mat'; ...
    'rawdata/2013-06-12/lamprey5-22-corr.mat'; ...
    'rawdata/2013-06-12/lamprey5-23-corr.mat'; ...
    'rawdata/2013-06-12/lamprey5-24-corr.mat'; ...
    'rawdata/2013-06-12/lamprey5-25-corr.mat'; ...
    'rawdata/2013-06-17/lamprey5-27.mat'; ...
    'rawdata/2013-06-17/lamprey5-28-corr.mat'; ...
    'rawdata/2013-06-17/lamprey5-29-corr.mat'; ...
    'rawdata/2013-06-17/lamprey5-30-corr.mat'; ...
    'rawdata/2013-06-17/lamprey5-31-corr.mat'; ...
    'rawdata/2013-06-17/lamprey5-31a-corr.mat'; ...
    'rawdata/2013-06-17/lamprey5-32-corr.mat'; ...
    'rawdata/2013-06-17/lamprey5-32a-corr.mat'; ...
    'rawdata/2013-06-17/lamprey5-33-corr.mat'; ...
    'rawdata/2013-06-17/lamprey5-33a-corr.mat'; ...
    'rawdata/2013-06-17/lamprey5-34-corr.mat'; ...
    'rawdata/2013-06-17/lamprey5-34a-corr.mat'; ...
    'rawdata/2013-06-17/lamprey5-35-corr.mat'; ...
    'rawdata/2013-06-17/lamprey5-35a-corr.mat'; ...
    'rawdata/2013-06-17/lamprey5-35b-corr.mat'; ...
    'rawdata/2013-06-17/lamprey5-36-corr.mat'; ...
    'rawdata/2013-06-17/lamprey5-36a-corr.mat'; ...
    'rawdata/2013-06-17/lamprey5-37-corr.mat'; ...
    'rawdata/2013-06-17/lamprey5-37a-corr.mat'; ...
    'rawdata/2013-06-17/lamprey5-38.mat'; ...
    'rawdata/2013-06-17/lamprey5-39-corr.mat'; ...
    'rawdata/2013-06-17/lamprey5-40-corr.mat'; ...
    'rawdata/2013-06-17/lamprey5-41-corr.mat'; ...
    'rawdata/2013-06-20/lamprey6-2.mat'; ...
    'rawdata/2013-06-20/lamprey6-3.mat'; ...
    'rawdata/2013-06-20/lamprey6-4.mat'; ...
    'rawdata/2013-06-20/lamprey6-5.mat'; ...
    'rawdata/2013-06-20/lamprey6-6.mat'; ...
    'rawdata/2013-06-20/lamprey6-7.mat'; ...
    'rawdata/2013-06-20/lamprey6-8.mat'; ...
    'rawdata/2013-06-20/lamprey6-9.mat'; ...
    'rawdata/2013-06-20/lamprey6-10.mat'; ...
    'rawdata/2013-06-20/lamprey6-11-corr.mat'; ...
    'rawdata/2013-06-20/lamprey6-12-corr.mat'; ...
    'rawdata/2013-06-20/lamprey6-13-corr.mat'; ...
    'rawdata/2013-06-20/lamprey6-14-corr.mat'; ...
    'rawdata/2013-06-20/lamprey6-15-corr.mat'; ...
    'rawdata/2013-06-20/lamprey6-16-corr.mat'; ...
    'rawdata/2013-06-20/lamprey6-17-corr.mat'; ...
    'rawdata/2013-06-20/lamprey6-18-corr.mat'; ...
    'rawdata/2013-06-20/lamprey6-19.mat'; ...
    'rawdata/2013-06-20/lamprey6-20-corr.mat'; ...
    'rawdata/2013-06-20/lamprey6-21.mat'; ...
    'rawdata/2013-06-20/lamprey6-22.mat'; ...
    'rawdata/2013-06-20/lamprey6-23-corr.mat'; ...
    'rawdata/2013-06-20/lamprey6-24-corr.mat'; ...
    'rawdata/2013-06-20/lamprey6-25-corr.mat'; ...
    'rawdata/2013-06-20/lamprey6-26.mat'; ...
    'rawdata/2013-06-20/lamprey6-27.mat'; ...
    'rawdata/2013-06-21/lamprey6-28-corr.mat'; ...
    'rawdata/2013-06-21/lamprey6-28a-corr.mat'; ...
    'rawdata/2013-06-21/lamprey6-29-corr.mat'; ...
    'rawdata/2013-06-21/lamprey6-29a-corr.mat'; ...
    'rawdata/2013-06-21/lamprey6-29b-corr.mat'; ...
    'rawdata/2013-06-21/lamprey6-30-corr.mat'; ...
    'rawdata/2013-06-21/lamprey6-31-corr.mat'; ...
    'rawdata/2013-06-21/lamprey6-32-corr.mat'; ...
    'rawdata/2013-06-21/lamprey6-33-corr.mat'; ...
    'rawdata/2013-06-21/lamprey6-33a-corr.mat'; ...
    'rawdata/2013-06-21/lamprey6-34-corr.mat'; ...
    'rawdata/2013-06-21/lamprey6-35-corr.mat'; ...
    'rawdata/2013-06-21/lamprey6-36-corr.mat'; ...
    'rawdata/2013-06-21/lamprey6-37-corr.mat'; ...
    'rawdata/2013-06-21/lamprey6-37a-corr.mat'; ...
    'rawdata/2013-06-21/lamprey6-37b.mat'; ...
    'rawdata/2013-06-21/lamprey6-38-corr.mat'; ...
    'rawdata/2013-06-21/lamprey6-38a-corr.mat'; ...
    'rawdata/2013-06-21/lamprey6-38b-corr.mat'; ...
    'rawdata/2013-06-21/lamprey6-39-corr.mat'; ...
    'rawdata/2013-06-21/lamprey6-40.mat'; ...
    'rawdata/2013-06-21/lamprey6-41-corr.mat'; ...
    'rawdata/2013-06-21/lamprey6-42.mat'; ...
    'rawdata/2013-06-21/lamprey6-43.mat'; ...
    'rawdata/2013-06-27/lamprey7-1-corr.mat'; ...
    'rawdata/2013-06-27/lamprey7-2-corr.mat'; ...
    'rawdata/2013-06-27/lamprey7-3-corr.mat'; ...
    'rawdata/2013-06-27/lamprey7-4-corr.mat'; ...
    'rawdata/2013-06-27/lamprey7-5.mat'; ...
    'rawdata/2013-06-27/lamprey7-6.mat'; ...
    'rawdata/2013-06-27/lamprey7-7.mat'; ...
    'rawdata/2013-06-27/lamprey7-8-corr.mat'; ...
    'rawdata/2013-06-27/lamprey7-9.mat'; ...
    'rawdata/2013-06-27/lamprey7-10-corr.mat'; ...
    'rawdata/2013-06-27/lamprey7-11-corr.mat'; ...
    'rawdata/2013-06-27/lamprey7-12-corr.mat'; ...
    'rawdata/2013-06-27/lamprey7-13-corr.mat'; ...
    'rawdata/2013-06-27/lamprey7-14-corr.mat'; ...
    'rawdata/2013-06-27/lamprey7-15-corr.mat'; ...
    'rawdata/2013-06-27/lamprey7-16.mat'; ...
    'rawdata/2013-06-27/lamprey7-17-corr.mat'; ...
    'rawdata/2013-06-27/lamprey7-18-corr.mat'; ...
    'rawdata/2013-06-27/lamprey7-19-corr.mat'; ...
    'rawdata/2013-06-27/lamprey7-20-corr.mat'; ...
    'rawdata/2013-06-27/lamprey7-21-corr.mat'; ...
    'rawdata/2013-06-27/lamprey7-22-corr.mat'; ...
    'rawdata/2013-06-27/lamprey7-23.mat'; ...
    'rawdata/2013-06-27/lamprey7-24.mat'; ...
    'rawdata/2013-06-27/lamprey7-25-corr.mat'; ...
    'rawdata/2013-06-27/lamprey7-26-corr.mat'; ...
    'rawdata/2013-06-27/lamprey7-27.mat'; ...
    'rawdata/2013-06-28/lamprey7-28-corr.mat'; ...
    'rawdata/2013-06-28/lamprey7-29-corr.mat'; ...
    'rawdata/2013-06-28/lamprey7-30.mat'; ...
    'rawdata/2013-06-28/lamprey7-31-corr.mat'; ...
    'rawdata/2013-06-28/lamprey7-32-corr.mat'; ...
    'rawdata/2013-06-28/lamprey7-32.mat'; ...
    'rawdata/2013-06-28/lamprey7-33-corr.mat'; ...
    'rawdata/2013-06-28/lamprey7-34-corr.mat'; ...
    'rawdata/2013-06-28/lamprey7-35-corr.mat'; ...
    'rawdata/2013-06-28/lamprey7-36-corr.mat'; ...
    'rawdata/2013-06-28/lamprey7-37.mat'; ...
    'rawdata/2013-06-28/lamprey7-38-corr.mat'; ...
    'rawdata/2013-06-28/lamprey7-39-corr.mat'; ...
    'rawdata/2013-06-28/lamprey7-40-corr.mat'; ...
    'rawdata/2013-06-28/lamprey7-41.mat'; ...
    'rawdata/2013-06-28/lamprey7-42.mat'; ...
    'rawdata/2013-06-28/lamprey7-42a.mat'; ...
    'rawdata/2013-06-28/lamprey7-43.mat'; ...
    'rawdata/2013-07-02/lamprey8-1.mat'; ...
    'rawdata/2013-07-02/lamprey8-2-corr.mat'; ...
    'rawdata/2013-07-02/lamprey8-3.mat'; ...
    'rawdata/2013-07-02/lamprey8-4-corr.mat'; ...
    'rawdata/2013-07-02/lamprey8-5-corr.mat'; ...
    'rawdata/2013-07-02/lamprey8-6-corr.mat'; ...
    'rawdata/2013-07-02/lamprey8-7-corr.mat'; ...
    'rawdata/2013-07-02/lamprey8-8.mat'; ...
    'rawdata/2013-07-02/lamprey8-9.mat'; ...
    'rawdata/2013-07-02/lamprey8-10.mat'; ...
    'rawdata/2013-07-02/lamprey8-11-corr.mat'; ...
    'rawdata/2013-07-02/lamprey8-12.mat'; ...
    'rawdata/2013-07-02/lamprey8-13-corr.mat'; ...
    'rawdata/2013-07-02/lamprey8-14.mat'; ...
    'rawdata/2013-07-02/lamprey8-15-corr.mat'; ...
    'rawdata/2013-07-02/lamprey8-16-corr.mat'; ...
    'rawdata/2013-07-02/lamprey8-17-corr.mat'; ...
    'rawdata/2013-07-02/lamprey8-18.mat'; ...
    'rawdata/2013-07-02/lamprey8-19.mat'; ...
    'rawdata/2013-07-02/lamprey8-20.mat'; ...
    'rawdata/2013-07-02/lamprey8-21-corr.mat'; ...
    'rawdata/2013-07-02/lamprey8-22-corr.mat'; ...
    'rawdata/2013-07-02/lamprey8-23.mat'; ...
    'rawdata/2013-07-02/lamprey8-24.mat'; ...
    'rawdata/2013-07-02/lamprey8-25.mat'; ...
    'rawdata/2013-07-02/lamprey8-26.mat'; ...
    'rawdata/2013-07-02/lamprey8-27.mat'; ...
    'rawdata/2013-07-03/lamprey8-28-corr.mat'; ...
    'rawdata/2013-07-03/lamprey8-29-corr.mat'; ...
    'rawdata/2013-07-03/lamprey8-30-corr.mat'; ...
    'rawdata/2013-07-03/lamprey8-30a-corr.mat'; ...
    'rawdata/2013-07-03/lamprey8-31-corr.mat'; ...
    'rawdata/2013-07-03/lamprey8-32-corr.mat'; ...
    'rawdata/2013-07-03/lamprey8-32a-corr.mat'; ...
    'rawdata/2013-07-03/lamprey8-33-corr.mat'; ...
    'rawdata/2013-07-03/lamprey8-33a-corr.mat'; ...
    'rawdata/2013-07-03/lamprey8-34-corr.mat'; ...
    'rawdata/2013-07-03/lamprey8-35-corr.mat'; ...
    'rawdata/2013-07-03/lamprey8-36-corr.mat'; ...
    'rawdata/2013-07-03/lamprey8-37-corr.mat'; ...
    'rawdata/2013-07-03/lamprey8-38-corr.mat'; ...
    'rawdata/2013-07-03/lamprey8-38a-corr.mat'; ...
    'rawdata/2013-07-03/lamprey8-39-corr.mat'; ...
    'rawdata/2013-07-03/lamprey8-40.mat'; ...
    'rawdata/2013-07-03/lamprey8-41-corr.mat'; ...
    'rawdata/2013-07-03/lamprey8-42-corr.mat'; ...
    'rawdata/2013-07-03/lamprey8-43-corr.mat'; ...
    'rawdata/2013-07-03/lamprey8-43.mat'; ...
    'rawdata/2013-07-10/lamprey9-1.mat'; ...
    'rawdata/2013-07-10/lamprey9-2-corr.mat'; ...
    'rawdata/2013-07-10/lamprey9-4.mat'; ...
    'rawdata/2013-07-10/lamprey9-5.mat'; ...
    'rawdata/2013-07-10/lamprey9-6-corr.mat'; ...
    'rawdata/2013-07-10/lamprey9-7.mat'; ...
    'rawdata/2013-07-10/lamprey9-7a.mat'; ...
    'rawdata/2013-07-10/lamprey9-8.mat'; ...
    'rawdata/2013-07-10/lamprey9-9.mat'; ...
    'rawdata/2013-07-10/lamprey9-10.mat'; ...
    'rawdata/2013-07-10/lamprey9-11-corr.mat'; ...
    'rawdata/2013-07-10/lamprey9-12.mat'; ...
    'rawdata/2013-07-10/lamprey9-13-corr.mat'; ...
    'rawdata/2013-07-10/lamprey9-14-corr.mat'; ...
    'rawdata/2013-07-10/lamprey9-15.mat'; ...
    'rawdata/2013-07-10/lamprey9-16.mat'; ...
    'rawdata/2013-07-10/lamprey9-17-corr.mat'; ...
    'rawdata/2013-07-10/lamprey9-18-corr.mat'; ...
    'rawdata/2013-07-10/lamprey9-19-corr.mat'; ...
    'rawdata/2013-07-10/lamprey9-20-corr.mat'; ...
    'rawdata/2013-07-10/lamprey9-21-corr.mat'; ...
    'rawdata/2013-07-10/lamprey9-22-corr.mat'; ...
    'rawdata/2013-07-10/lamprey9-23-corr.mat'; ...
    'rawdata/2013-07-10/lamprey9-24-corr.mat'; ...
    'rawdata/2013-07-10/lamprey9-25-corr.mat'; ...
    'rawdata/2013-07-10/lamprey9-26-corr.mat'; ...
    'rawdata/2013-07-10/lamprey9-27-corr.mat'; ...
    'rawdata/2013-07-11/lamprey9-28-corr.mat'; ...
    'rawdata/2013-07-11/lamprey9-29-corr.mat'; ...
    'rawdata/2013-07-11/lamprey9-30-corr.mat'; ...
    'rawdata/2013-07-11/lamprey9-31-corr.mat'; ...
    'rawdata/2013-07-11/lamprey9-32-corr.mat'; ...
    'rawdata/2013-07-11/lamprey9-33-corr.mat'; ...
    'rawdata/2013-07-11/lamprey9-34-corr.mat'; ...
    'rawdata/2013-07-11/lamprey9-35-corr.mat'; ...
    'rawdata/2013-07-11/lamprey9-36-corr.mat'; ...
    'rawdata/2013-07-11/lamprey9-37-corr.mat'; ...
    'rawdata/2013-07-11/lamprey9-38-corr.mat'; ...
    'rawdata/2013-07-11/lamprey9-39-corr.mat'; ...
    'rawdata/2013-07-11/lamprey9-40-corr.mat'; ...
    'rawdata/2013-07-11/lamprey9-41.mat'; ...
    'rawdata/2013-07-11/lamprey9-42.mat'; ...
    'rawdata/2013-07-11/lamprey9-43-corr.mat'; ...
    };

if (~exist('viscosity_kinematics.mat','file'))
    mergekinematicsfiles(filenames, 'viscosity_kinematics.mat',...
        'savemidlines');
end

visc0(1:11,5) = 1;
visc0(12:21,5) = 10;
visc0(22:25,5) = 1;
visc0(27:37,5) = 20;
visc0(38:41,5) = 1;
visc0(1:11,6) = 1;
visc0(12:22,6) = 10;
visc0(23:27,6) = 1;
visc0(28:38,6) = 20;
visc0(39:43,6) = 1;
visc0(1:11,7) = 1;
visc0(12:22,7) = 10;
visc0(23:27,7) = 1;
visc0(28:38,7) = 20;
visc0(39:43,7) = 1;
visc0(1:11,8) = 1;
visc0(12:22,8) = 10;
visc0(23:27,8) = 1;
visc0(28:38,8) = 20;
visc0(39:43,8) = 1;
visc0(1:11,9) = 1;
visc0(12:22,9) = 10;
visc0(23:27,9) = 1;
visc0(28:38,9) = 20;
visc0(39:43,9) = 1;

rep0(1:11,5) = 1;
rep0(12:21,5) = 1;
rep0(22:25,5) = 2;
rep0(27:37,5) = 1;
rep0(38:41,5) = 3;
rep0(1:11,6) = 1;
rep0(12:22,6) = 1;
rep0(23:27,6) = 2;
rep0(28:38,6) = 1;
rep0(39:43,6) = 3;
rep0(1:11,7) = 1;
rep0(12:22,7) = 1;
rep0(23:27,7) = 2;
rep0(28:38,7) = 1;
rep0(39:43,7) = 3;
rep0(1:11,8) = 1;
rep0(12:22,8) = 1;
rep0(23:27,8) = 2;
rep0(28:38,8) = 1;
rep0(39:43,8) = 3;
rep0(1:11,9) = 1;
rep0(12:22,9) = 1;
rep0(23:27,9) = 2;
rep0(28:38,9) = 1;
rep0(39:43,9) = 3;

tok = regexp(filenames,'lamprey(\d+)-(\d+)','once','tokens');

indiv = cellfun(@(x) str2double(x{1}), tok);
trial = cellfun(@(x) str2double(x{2}), tok);

visc = visc0(sub2ind(size(visc0),trial,indiv));
rep = rep0(sub2ind(size(rep0),trial,indiv));

save('viscosity_kinematics','-append','indiv','trial','visc','rep');
